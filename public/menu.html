<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Меню</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <!-- CSS через /public -->
  <link rel="stylesheet" href="/public/menu.css" />
</head>
<body>
  <div id="loader-overlay" class="loader-overlay">
    <div class="spinner"></div>
  </div>

  <main id="main-content" class="main-content">

    <div class="start-tutorial-btn-wrapper">
        <button id="start-tutorial-btn"><i class="fa-solid fa-circle-question"></i> Как пользоваться?</button>
    </div>

    <div id="new-promo-notification" class="promo-notification hidden">
        <span>🏆 Новый промокод добавлен в ваш профиль!</span>
        <button id="close-promo-notification" class="promo-notification-close">&times;</button>
    </div>

    <div class="user-profile">
      <div class="user-info">
        <div id="fullName" class="user-name">Загрузка...</div>
        <a href="/profile" class="profile-link">Мой профиль</a>
      </div>
      <div class="stats-block">
        <div class="social-stats-wrapper">
          <div class="social-links">
            <a href="https://t.me/hatelovettv" target="_blank" rel="noopener noreferrer" class="stats-link">
                <div class="social-icon-wrapper" id="telegram-icon"><i class="fa-brands fa-telegram"></i></div>
            </a>
            <a href="https://www.twitch.tv/hatelove_ttv" target="_blank" rel="noopener noreferrer" class="stats-link">
                <div class="social-icon-wrapper" id="twitch-icon"><i class="fa-brands fa-twitch"></i></div>
            </a>
          </div>
          <div class="stats-item tickets-item">
              <span id="ticketStats" class="stats-text">0</span>
              <div class="stats-icon stats-icon-star"><i class="fa-solid fa-ticket"></i></div>
              <i class="fa-solid fa-circle-question info-question-icon" id="info-question-icon"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="main-content">
    <h2 class="custom-title">Активные ивенты канала</h2>
    
    </div>
    <div id="view-dashboard" class="view">
        <div id="main-slider-container" class="slider-container">
            <div class="slider-wrapper">
                <a href="/events" class="slide">
                    <img id="menu-banner-img" src="https://i.postimg.cc/d0r554hc/1200-600.png?v=2" alt="Гонка за скинами">
                </a>
                <a href="#" class="slide">
                    <img src="https://i.postimg.cc/CKKLsnVw/1200-600-hallowen.png" alt="Скоро">
                </a>
            </div>
            <button id="slide-prev-btn" class="slider-arrow prev"><i class="fa-solid fa-chevron-left"></i></button>
            <button id="slide-next-btn" class="slider-arrow next"><i class="fa-solid fa-chevron-right"></i></button>
            <div class="slider-dots"></div>
        </div>
        
        <div id="challenge-container"></div>
        <hr style="border-color: rgba(255,255,255,0.1); margin: 15px 0;">
      
        <a id="checkpoint-link" href="/checkpoint" style="text-decoration: none; display: block; margin-bottom: 15px;">
            <img id="checkpoint-banner-img" src="https://i.postimg.cc/6p39wgzJ/1200-324.png" alt="Марафон Чекпоинт" style="width: 100%; border-radius: 12px; display: block;">
        </a>
        <hr style="border-color: rgba(255,255,255,0.1); margin: 15px 0;">
      
        <div id="quest-choose-wrapper">
            <button id="quest-choose-btn" class="quest-choose-btn-roulette">НАЧАТЬ ИСПЫТАНИЕ</button>
            <div id="quest-choose-container" class="quest-choose-container hidden"></div>
        </div>
        <div id="active-automatic-quest-container"></div>
        
    </div>
    
    <div id="view-quests" class="view quests-container hidden">
        <h2 class="page-title" style="grid-column: 1 / -1;">
            📝 Задания с ручной проверкой
            <span class="manual-hint" style="display: block; font-size: 11px; color: #ffffff; text-align: center; margin-top: 6px; margin-bottom: 12px;">
                Все полученные промокоды вы найдёте в разделе
                <span style="color: #ffc700; font-weight: 600;">Профиль</span>.
            </span>
        </h2>
    </div>
    
  </main>
  
  <footer class="app-footer">
    <a href="/leaderboard" id="nav-leaderboard" class="footer-item"><div class="icon-wrapper"><i class="fa-solid fa-trophy"></i></div><span>Лидерборд</span></a>
    <a href="#" id="nav-dashboard" class="footer-item active"><div class="icon-wrapper"><i class="fa-solid fa-house"></i></div><span>Главная</span></a>
    <a href="#" id="nav-quests" class="footer-item"><div class="icon-wrapper"><i class="fa-solid fa-check-double"></i></div><span>Задания</span></a>    
    <a href="/events" class="footer-item"><div class="icon-wrapper"><i class="fa-solid fa-gift"></i></div><span>Розыгрыши</span></a>    
    <a href="/admin" id="nav-admin" class="footer-item hidden"><div class="icon-wrapper"><i class="fa-solid fa-user-shield"></i></div><span>Админка</span></a>
  </footer>
  
  <div id="promocode-overlay" class="promocode-overlay hidden"></div>

  <div id="reward-claimed-overlay" class="prompt-overlay hidden">
    <div class="prompt-modal">
        <h3>Награда получена!</h3>
        <p style="font-size: 14px; line-height: 1.5; color: var(--text-color-muted);">
            Промокод добавлен в ваш профиль. Вы можете найти все свои награды там.
        </p>
        <div class="prompt-actions">
            <button id="reward-close-btn" class="cancel-btn">Главное меню</button>
            <a href="/profile" class="confirm-btn">Профиль</a>
        </div>
    </div>
  </div>

  <div id="info-modal-overlay" class="prompt-overlay hidden">
    <div class="prompt-modal">
        <h3>Что такое билеты?</h3>
        <p style="font-size: 14px; line-height: 1.5; color: var(--text-color-muted);">
            Выполняйте задания и челленджи, чтобы заработать билеты. Используйте их для участия в розыгрышах ценных призов!
        </p>
        <div class="prompt-actions">
            <button class="confirm-btn" id="info-modal-close-btn">Понятно</button>
        </div>
    </div>
  </div>

  <div id="custom-prompt-overlay" class="prompt-overlay hidden">
    <div class="prompt-modal">
        <h3 id="prompt-title">Title</h3>
        <p>Введите данные для проверки.</p>
        <input type="text" id="prompt-input" placeholder="Ваш ник или ссылка...">
        <div class="prompt-actions">
            <button id="prompt-cancel" class="cancel-btn">Отмена</button>
            <button id="prompt-confirm" class="confirm-btn">Отправить</button>
        </div>
    </div>
  </div>

  <div id="tutorial-overlay" class="tutorial-overlay hidden">
    <div id="tutorial-modal" class="tutorial-modal">
        <div class="tutorial-modal-header">
            <h3 id="tutorial-title">Добро пожаловать!</h3>
            <span id="tutorial-step-counter"></span>
        </div>
        <p id="tutorial-text">Давайте быстро пробежимся по основным функциям.</p>
        <div class="tutorial-modal-actions">
            <button id="tutorial-skip-btn">Пропустить</button>
            <button id="tutorial-next-btn">Далее</button>
        </div>
    </div>
  </div>

  <!-- JS через /public -->
  <script src="/public/menu.js"></script>
</body>
</html>
